---
import ButtonSocialLink from './ButtonSocialLink.astro';
import InstagramIcon from '../assets/icons/InstagramIcon.astro';

import RightIcon from '../assets/icons/RightIcon.astro';
import LeftIcon from '../assets/icons/LeftIcon.astro';

const { id } = Astro.props;
---

<section id={id} class="bg-white text-black py-14 scroll-mt-10">
  <div class="max-w-7xl mx-auto flex flex-col-reverse md:flex-row gap-10 md:px-8 px-4">
    <div class="relative w-full max-w-lg mx-auto overflow-hidden rounded-2xl">
      <!-- Imagen mostrada -->
      <img
        id="gallery-image"
        src="images/team/team_1.webp"
        class="w-full h-[25rem] md:h-[32rem] object-cover transition-all duration-500 transit ease-in-out"
        alt="Imagen galería"
      />

      <!-- Botón anterior -->
      <button
        onclick="prevImage()"
        class="absolute left-2 top-1/2 -translate-y-1/2 bg-white/70 hover:bg-white text-black px-3 py-2 rounded-full shadow cursor-pointer"
      >
        <LeftIcon />
      </button>

      <button
        onclick="nextImage()"
        class="absolute right-2 top-1/2 -translate-y-1/2 bg-white/70 hover:bg-white text-black px-3 py-2 rounded-full shadow cursor-pointer"
      >
        <RightIcon />
      </button>

      <div class="absolute bottom-2 left-1/2 -translate-x-1/2 flex space-x-2" id="indicators"></div>
    </div>
    <div class="flex-1">
      <h2
        class="uppercase text-2xl md:text-4xl font-bold mb-1 text-gray-800 md:text-start text-center"
      >
        Team Daniel Kelly
      </h2>
      <h3 class="font-semibold text-green-600 mb-4 md:text-start text-center">
        Transforma tu cuerpo y mente.
      </h3>
      <p class="text-gray-700 mb-3 leading-relaxed">
        Con mi enfoque en <span class="font-medium"
          >instrucción deportiva y acondicionamiento físico</span
        >, te ayudo a alcanzar tus objetivos de forma efectiva y sostenible.
      </p>
      <p class="text-gray-700 mb-3 leading-relaxed">
        Ofrezco coaching online y presencial, combinando nutrición y entrenamiento diseñados para
        ti. Aquí puedes ver algunas de las <span class="font-medium"
          >transformaciones de mis alumnos.</span
        >
      </p>

      <div class="flex gap-4 flex-wrap mt-6">
        <ButtonSocialLink
          title="Instagram teamdanielkelly"
          href="https://www.instagram.com/teamdanielkelly/"
          bg="bg-green-600 hover:bg-green-700"
          className="text-white px-6 py-2"
        >
          <InstagramIcon />teamdanielkelly
        </ButtonSocialLink>
      </div>
    </div>
  </div>
</section>

<script>
  const images = [
    'images/team/team_1.webp',
    'images/team/team_2.webp',
    'images/team/team_3.webp',
    'images/team/team_4.webp',
    'images/team/team_5.webp',
    'images/team/team_6.webp',
    'images/team/team_7.webp',
    'images/team/team_8.webp',
    'images/team/team_9.webp',
    'images/team/team_10.webp',
  ];

  let current = 0;

  const imageEl = document.getElementById('gallery-image') as HTMLImageElement;
  const indicatorsContainer = document.getElementById('indicators');

  function renderIndicators() {
    if (indicatorsContainer) {
      indicatorsContainer.innerHTML = '';
      images.forEach((_, index) => {
        const dot = document.createElement('div');
        dot.className = `w-3 h-3 rounded-full transition-all duration-200 ${index === current ? 'bg-green-600' : 'bg-gray-400'}`;
        indicatorsContainer.appendChild(dot);
      });
    }
  }

  function updateImage() {
    if (imageEl) {
      imageEl.src = images[current];
      renderIndicators();
    }
  }

  (window as any).prevImage = function () {
    current = current === 0 ? images.length - 1 : current - 1;
    updateImage();
  };

  (window as any).nextImage = function () {
    current = current === images.length - 1 ? 0 : current + 1;
    updateImage();
  };

  // Inicializar
  updateImage();
</script>
